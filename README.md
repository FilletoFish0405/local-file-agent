# 本地文件Agent

一个本地文件操作工具，支持自然语言指令来操作本地文件系统。

## 功能特点

- 🚀 **自然语言交互**：用中文自然语言指令操作文件
- 📁 **文件查找**：查找指定目录及子目录下的特定类型文件
- 🔍 **隐藏文件统计**：统计指定目录下的隐藏文件数量
- 📝 **文件操作**：创建、删除、修改文件和文件夹
- 💻 **跨平台支持**：支持 Windows、Linux、macOS
- 📦 **零依赖**：只使用 Python 标准库，无需安装第三方包
- 🎯 **面向对象设计**：采用类结构，代码更清晰易维护

## 安装和运行

### 环境要求
- Python 3.6+

### 运行方式
```bash
python local_file_agent.py
```

## 支持的指令

### 1. 查找文件
**格式：** `[目录名]和子目录下所有[文件类型]文件`

**示例：**
```
desktop和子目录下所有pdf文件
Downloads和子目录下所有txt文件
D:\资料和子目录下所有jpg文件
```

**支持的文件类型：** pdf、txt、docx、xlsx、jpg、png、jpeg、doc、xls、ppt、pptx

### 2. 统计隐藏文件
**格式：** 
- `去[目录路径]下面找一下我有多少隐藏文件`
- `去[目录路径]里找一下我有多少隐藏文件`
- `[目录路径]下面有多少隐藏文件`

**示例：**
```
去home下面找一下我有多少隐藏文件
去桌面里找一下我有多少隐藏文件
Documents下面有多少隐藏文件
```

### 3. 创建文件或文件夹
**格式：** `创建一个[类型]在[路径]`

**示例：**
```
创建一个文件在~/test.txt
创建一个文件夹在~/新文件夹
创建一个目录在/home/user/documents
```

### 4. 删除文件或文件夹
**格式：** `删除[路径]`

**示例：**
```
删除~/test.txt
删除~/临时文件夹
删除D:\测试文件.docx
```

### 5. 修改文件内容
**格式：** `修改文件[路径]的内容为[内容]`

**示例：**
```
修改文件~/test.txt的内容为Hello World
修改文件/home/user/note.txt的内容为这是新内容
```

### 6. 退出程序
```
exit
quit
退出
```

## 特殊路径支持

程序支持以下特殊路径关键词：

| 关键词 | 实际路径 |
|--------|----------|
| desktop, 桌面 | ~/Desktop |
| downloads, 下载 | ~/Downloads |
| documents, 文档 | ~/Documents |
| home, 主目录 | ~ |

## 使用示例

```
==================================================
本地文件Agent
支持指令:
1. 查找: 'desktop和子目录下所有pdf文件'
2. 统计: '去home下面找一下我有多少隐藏文件'
3. 创建: '创建一个文件在~/test.txt'
4. 删除: '删除~/test.txt'
5. 修改: '修改文件~/test.txt的内容为Hello'
6. 退出: 'exit'
==================================================

请输入指令 > desktop和子目录下所有pdf文件
✅ 找到 3 个文件:
  1. C:\Users\用户名\Desktop\文档1.pdf
  2. C:\Users\用户名\Desktop\文件夹\文档2.pdf
  3. C:\Users\用户名\Desktop\文件夹\子文件夹\文档3.pdf

请输入指令 > 创建一个文件在~/测试文件.txt
✅ 文件已创建: C:\Users\用户名\测试文件.txt

请输入指令 > 修改文件~/测试文件.txt的内容为这是测试内容
✅ 文件内容已修改: C:\Users\用户名\测试文件.txt

请输入指令 > 去桌面下面找一下我有多少隐藏文件
✅ 找到 5 个隐藏文件

请输入指令 > 删除~/测试文件.txt
✅ 文件已删除: C:\Users\用户名\测试文件.txt

请输入指令 > exit
再见！
```

## 代码架构

### 核心类：FileAgent

#### 主要属性
- `file_types`: 支持的文件类型映射字典
- `special_paths`: 特殊路径关键词映射字典

#### 主要方法
- `normalize_path()`: 标准化路径处理
- `find_files()`: 查找指定类型文件
- `count_hidden_files()`: 统计隐藏文件数量
- `create_file_or_folder()`: 创建文件或文件夹
- `delete_file_or_folder()`: 删除文件或文件夹
- `modify_file_content()`: 修改文件内容
- `parse_command()`: 解析自然语言指令
- `execute_command()`: 执行解析后的指令
- `run()`: 运行主循环

## 项目结构

```
local_file_agent_oop/
├── local_file_agent.py        # 主程序文件
└── README.md                  # 项目说明文档
```

## 技术实现

- **面向对象设计**：使用 FileAgent 类封装所有功能
- **文件遍历**：使用 `os.walk()` 递归遍历目录
- **模式匹配**：使用 `fnmatch.fnmatch()` 进行文件名匹配
- **自然语言解析**：使用正则表达式解析用户指令
- **路径处理**：统一的路径标准化函数，自动处理特殊路径

## 扩展功能

如需添加更多功能，可以：

1. 在 `FileAgent` 类中添加新的方法
2. 在 `parse_command()` 方法中添加新的正则表达式模式
3. 在 `execute_command()` 方法中添加对应的处理逻辑
4. 扩展 `file_types` 或 `special_paths` 字典以支持更多类型

## 优势特点

### 相比函数式版本的优势：
- **更好的代码组织**：相关功能封装在类中，逻辑更清晰
- **更易维护**：类结构使代码更模块化，便于修改和扩展
- **状态管理**：可以管理配置信息（如文件类型、特殊路径）
- **可重用性**：FileAgent 类可以在其他项目中直接使用
- **更简洁的主函数**：main() 函数只需创建实例并运行

## 注意事项

- 程序会自动过滤隐藏文件（以 `.` 开头的文件和目录）
- 支持中文路径和特殊字符
- 程序会自动处理路径分隔符的跨平台兼容性
- 创建文件时会自动创建必要的父目录
